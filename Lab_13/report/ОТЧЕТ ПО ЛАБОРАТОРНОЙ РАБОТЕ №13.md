![](media/image1.png){width="1.75in" height="0.6240912073490814in"}

**РОССИЙСКИЙ УНИВЕРСИТЕТ ДРУЖБЫ НАРОДОВ**

Факультет физико-математических и естественных наук\
Кафедра прикладной информатики и теории вероятностей

**ОТЧЕТ ПО ЛАБОРАТОРНОЙ РАБОТЕ № 13**

Фильтр пакетов

**Студент:** Эйвази Мани

**Группа:** НПИбд-03-24

**Студенческий билет №:** 1032245107

**Цель работы**

Получить практические навыки настройки и управления динамическим
межсетевым экраном (брандмауэром) в Linux с использованием firewalld.
Освоить работу с зонами безопасности, добавлением служб и портов как
через командную строку (firewall-cmd), так и через графический интерфейс
(firewall-config).

**Первый шаг:** Получение базовой информации о настройках firewalld.
Система использует зону public по умолчанию, в которой изначально
разрешены только критически важные службы (SSH для управления и
DHCPv6-client).

![](media/image2.png){width="6.5in" height="3.90625in"}

> **Второй шаг:** Получение полной информации о настройках активной и
> конкретной зоны. Команда \--list-all предоставляет исчерпывающий обзор
> всех правил в зоне.
>
> ![](media/image2.png){width="6.5in" height="2.1377318460192476in"}
>
> ![](media/image3.png){width="6.5in" height="0.5370374015748032in"}
>
> **Третий шаг:** Временное открытие доступа к серверу VNC. Служба
> vnc-server добавлена в runtime-конфигурацию. Изменение действует
> немедленно, но не сохраняется после перезагрузки службы или системы.
>
> ![](media/image4.png){width="6.499438976377952in"
> height="3.5092596237970253in"}

**Четвертый шаг**: Проверка сохранности временных изменений.
Служба vnc-server исчезла из конфигурации. Это произошло потому, что
команда \--add-service без флага \--permanent вносит изменение **только
в runtime-конфигурацию**, которая хранится в оперативной памяти.
Перезапуск службы сбрасывает runtime-конфигурацию до состояния,
описанного в **permanent-конфигурации** (хранится на диске). На диске
правило для VNC сохранено не было.

**systemctl restart firewalld**

**firewall-cmd \--list-all** *( vnc-server исчез из списка!)*

> **Пятый шаг:** Внесение постоянного изменения и его активация.
> Ключевой вывод --- постоянные изменения (\--permanent) требуют
> применения командой \--reload (или перезапуска службы), чтобы вступить
> в силу в runtime.
>
> ![](media/image4.png){width="5.2020002187226595in"
> height="2.808333333333333in"}

![](media/image5.png){width="6.5in" height="3.2318339895013124in"}

> **Шестой шаг:** Открытие произвольного TCP-порта (например, для
> нестандартной службы). Успешно добавлено правило, разрешающее входящие
> подключения по протоколу TCP на порт 2022 в зоне public.
>
> ![](media/image6.png){width="6.499671916010499in"
> height="1.0923611111111111in"}
>
> **Седьмой шаг:** Открытие утилиты firewall-config (требует прав root,
> запрашивает пароль). Запущен графический интерфейс для
> настройки firewalld. В верхнем выпадающем
> списке Configuration выбирается режим Permanent. Это гарантирует, что
> все изменения будут сохранены на диске. Интерфейс переключен в режим
> редактирования постоянной
> конфигурации.![](media/image7.png){width="6.5in"
> height="4.815277777777778in"}
>
> **Восьмой шаг:** В левой панели выбирается зона public. На
> вкладке Services отмечаются флажки для служб http, https, ftp. Службы
> добавлены в постоянную конфигурацию зоны public.
>
> ![](media/image8.png){width="6.5in" height="4.7756944444444445in"}
>
> **девяти шаг:** Переход на вкладку Ports, нажатие кнопки Add. В
> диалоговом окне вводится порт 2022 и выбирается
> протокол udp.файл /etc/resolv.conf автоматически обновится, содержая
> оба DNS-сервера. Порт 2022/udp добавлен в постоянную конфигурацию
> зоны public
>
> ![](media/image9.png){width="6.5in" height="4.726388888888889in"}
>
> **Десятый шаг:** После закрытия firewall-config изменения, внесенные в
> режиме Permanent, требуют перезагрузки конфигурации, чтобы вступить в
> силу.Все изменения, сделанные в графическом интерфейсе (службы и
> порт), успешно применены и активны.
>
> ![](media/image10.png){width="5.9537040682414695in"
> height="6.668150699912511in"}
>
> **Работа с NetworkManager через текстовый пользовательский
> интерфейс.**

- Команда: nmtui

- Результат: Открывается меню, позволяющее в удобной форме
  просматривать, редактировать, активировать и удалять подключения, а
  также изменять параметры системы (Edit a connection, Activate a
  connection и т.д.). Все изменения, внесенные через nmtui,
  соответствуют командам nmcli.

**заключение**

В ходе лабораторной работы были успешно освоены принципы и инструменты
работы с динамическим межсетевым экраном firewalld в Linux:

1.  **Концепция зон:** Понята и применена ключевая
    абстракция firewalld --- **зоны
    безопасности** (public, home, internal и др.). Зоны позволяют гибко
    назначать разные наборы правил для разных сетевых интерфейсов или
    источников трафика, что критически важно для серверов с несколькими
    сетевыми картами.

2.  **Двойная конфигурация:** Освоена фундаментальная
    архитектура firewalld, разделяющая конфигурацию на:

    - **Runtime (время выполнения):** Активные правила в памяти.
      Изменяются командами без флага \--permanent. Сбрасываются при
      перезагрузке службы.

    - **Permanent (постоянная):** Правила, хранящиеся на диске (в
      файлах /etc/firewalld/). Изменяются с флагом \--permanent. Для
      применения требуют выполнения firewall-cmd \--reload.

3.  **Управление через CLI (**firewall-cmd**):** Получены навыки
    использования основного командного инструмента для всех операций:
    просмотр состояния, добавление/удаление предопределенных служб
    (\--add-service) и пользовательских портов (\--add-port), управление
    зонами, перезагрузка конфигурации.

4.  **Управление через GUI (**firewall-config**):** Освоена работа с
    графической утилитой, которая предоставляет удобный визуальный
    интерфейс для тех же операций. Особое внимание уделено переключению
    между режимами Runtime и Permanent в интерфейсе.

5.  **Практическое применение:** Создана комплексная конфигурация
    брандмауэра, разрешающая доступ к стандартным веб- и почтовым
    службам, а также к пользовательским портам, что моделирует типичную
    задачу системного администратора.

Работа показала, что firewalld предоставляет мощный, гибкий и
относительно простой в использовании инструмент для управления сетевой
безопасностью, заменяя собой более сложные и низкоуровневые механизмы
вроде прямого управления iptables.

1.  Какая служба должна быть запущена перед началом работы с менеджером
    конфигурации брандмауэра firewall-config?

> Служба firewalld. Проверить: systemctl status firewalld. Она должна
> быть в состоянии active (running).

2.  Какая команда позволяет добавить UDP-порт 2355 в конфигурацию
    брандмауэра в зоне по умолчанию?

> firewall-cmd \--add-port=2355/udp (временное) или firewall-cmd
> \--add-port=2355/udp \--permanent (постоянное, с
> последующим \--reload).

3.  Какая команда позволяет показать всю конфигурацию брандмауэра во
    всех зонах?

> firewall-cmd \--list-all-zones.

4.  Какая команда позволяет удалить службу vnc-server из текущей
    конфигурации брандмауэра?

> firewall-cmd \--remove-service=vnc-server (из runtime)
> или firewall-cmd \--remove-service=vnc-server \--permanent (из
> permanent-конфигурации).

5.  Какая команда firewall-cmd позволяет активировать новую
    конфигурацию, добавленную опцией \--permanent?

> firewall-cmd \--reload.

6.  Какой параметр firewall-cmd позволяет проверить, что новая
    конфигурация была добавлена в текущую зону и теперь активна?

> firewall-cmd \--list-all (показывает активную runtime-конфигурацию для
> текущей/указанной зоны).

7.  Какая команда позволяет добавить интерфейс eno1 в зону public?

> firewall-cmd \--zone=public \--add-interface=eno1 \--permanent (и
> затем \--reload).

8.  Если добавить новый интерфейс в конфигурацию брандмауэра, пока не
    указана зона, в какую зону он будет добавлен?

> В зону по умолчанию (default zone). Узнать её можно
> командой firewall-cmd \--get-default-zone (обычно public).
