![](media/image1.png){width="1.75in" height="0.6240912073490814in"}

**РОССИЙСКИЙ УНИВЕРСИТЕТ ДРУЖБЫ НАРОДОВ**

Факультет физико-математических и естественных наук\
Кафедра прикладной информатики и теории вероятностей

**ОТЧЕТ ПО ЛАБОРАТОРНОЙ РАБОТЕ № 8**

Планировщики событий (cron и at)

**Студент:** Эйвази Мани

**Группа:** НПИбд-03-24

**Студенческий билет №:** 1032245107

**Цель работы**

Получение практических навыков работы с планировщиками
событий cron и at. Освоение методов автоматизации регулярных и
одноразовых задач в операционной системе Linux, включая настройку
расписаний, создание скриптов и управление заданиями..

**Первый шаг:** Проверка состояния демона crond и изучение системного
файла расписаний. Служба crond активна и запущена.
Файл /etc/crontab содержит системное расписание и переменные окружения.
Личное расписание пользователя root изначально пустое.

![](media/image2.png){width="6.500694444444444in" height="5.1875in"}

**Второй шаг:** Добавление задания, которое будет выполняться каждую
минуту и записывать сообщение в системный журнал. После сохранения файла
и проверки командой crontab -l задание отображается в списке. Через
несколько минут команда grep \"written from root cron\"
/var/log/messages подтверждает его выполнение -- в логе появляются
соответствующие записи.

![](media/image2.png){width="4.829779090113735in"
height="1.6041666666666667in"}

![](media/image3.png){width="6.435687882764654in"
height="0.7291666666666666in"}

**Третий шаг:** Изменение задания для выполнения в 0 минут каждого часа,
но только по рабочим дням (понедельник-пятница). После редактирования
(crontab -e) и проверки (crontab -l) задание обновлено. Логи будут
писаться только в указанные часы рабочих дней.

![](media/image4.png){width="5.7175481189851265in"
height="0.6979166666666666in"}

**Четвертый шаг**: Создание исполняемого скрипта, который будет
запускаться ежечано. Создан скрипт eachhour. Демон crond автоматически
выполняет все исполняемые скрипты из каталогов cron.hourly, cron.daily и
т.д. в соответствии со своим расписанием (обычно каждый час, день и
т.д.).

![](media/image5.png){width="6.844581146106736in" height="1.0625in"}

**Пятый шаг:** Создание системного файла расписания для выполнения
задачи в конкретную минуту каждого часа. Создан файл eachhour. Его
синтаксис отличается от пользовательского crontab: после времени
выполнения явно указывается пользователь (root), от имени которого будет
запущена команда. Задание будет выполняться на 11-й минуте каждого часа.
Через некоторое время запись в /var/log/messages подтверждает
выполнение.

![](media/image6.png){width="6.500694444444444in"
height="1.3854166666666667in"}

- **Шестой шаг:** Убедиться, что демон для одноразовых заданий запущен.\
  **Команда:** systemctl status atd\
  Служба atd активна и работает.

**Седьмой шаг:** Запланировать выполнение команды на конкретное время
(например, через 2 минуты от текущего). Команда atq показывает
запланированное задание с его номером (job id) и временем выполнения. В
указанное время (grep \'message from at\' /var/log/messages) в системном
журнале появляется соответствующая запись, подтверждающая успешное
выполнение.

![](media/image7.png){width="4.499444444444444in"
height="3.799676290463692in"}

**заключение**

- **Личные задания:** создание через crontab -e, освоен синтаксис полей
  времени и шаблоны (\*, \*/n, диапазоны).

- **Системные задания через
  каталоги:** использование /etc/cron.hourly/, /etc/cron.daily/ и др.
  для исполняемых скриптов с фиксированной периодичностью.

- **Системные задания через **/etc/cron.d/**:** централизованное
  управление заданиями с указанием пользователя для выполнения.

> **Планировщик at (разовые задачи):**

- Планирование команд на указанное время командой at \<время\>.

- Управление: просмотр очереди (atq), удаление заданий (atrm \<номер\>).

> **Верификация выполнения:**

- Проверка факта выполнения через анализ системного
  журнала /var/log/messages (с использованием grep).

- Генерация тестовых записей с помощью утилиты logger.

> **Вывод:** Грамотное применение cron и at позволяет автоматизировать
> рутинные административные задачи (резервное копирование, очистка,
> отчёты), повышая эффективность управления системой.

1.  **Как настроить задание cron, чтобы оно выполнялось раз в 2
    недели?**

> Один из способов: 0 0 \*/14 \* \* \<команда\>. Это задание будет в
> ыполняться в 0:00 каждые 14 дней месяца. Для точного учета н едель
> можно использовать поле \"день недели\" в комбинации с другими, но
> проще создать скрипт, который проверяет дату, и з апускать его
> ежедневно.

2.  **Как настроить задание cron, чтобы оно выполнялось 1-го и 15-го
    числа каждого месяца в 2 часа ночи?**

> 0 2 1,15 \* \* \<команда\>

3.  **Как настроить задание cron, чтобы оно выполнялось каждые 2 минуты
    каждый день?**

> \*/2 \* \* \* \* \<команда\>

4.  **Как настроить задание cron, чтобы оно выполнялось 19 сентября
    ежегодно?**

> 0 0 19 9 \* \<команда\>

5.  **Как настроить задание cron, чтобы оно выполнялось каждый четверг
    сентября ежегодно?**

> 0 0 \* 9 4 \<команда\> (поле \"день недели\": 4 = четверг, поле \"день
> месяца\": \* = любой).

6.  **Какая команда позволяет вам назначить задание cron для
    пользователя alice? Приведите подтверждающий пример.**

> crontab -u alice -e (для редактирования). Или можно создать файл и
> загрузить его: crontab -u alice \< файл_с_расписанием.

7.  **Как указать, что пользователю bob никогда не разрешено назначать
    задания через cron? Приведите подтверждающий пример.**

> Добавить имя пользователя в файл /etc/cron.deny. Пример:
>
> bash
>
> echo \"bob\" \>\> /etc/cron.deny

8.  **Вам нужно убедиться, что задание выполняется каждый день, даже
    если сервер во время выполнения временно недоступен. Как это
    сделать?**

> Использовать anacron. Задания anacron (обычно размещаются
> в /etc/cron.daily/, /etc/cron.weekly/, /etc/cron.monthly/) выполня
> ются при следующем включении системы, если они были проп ущены по
> расписанию.

9.  **Какая команда позволяет пользователю посмотреть, какие задания
    назначены на выполнение планировщиком atd?**

> atq (или at -l).
