```
РОССИЙСКИЙ УНИВЕРСИТЕТ ДРУЖБЫ НАРОДОВ
Факультет физико-математических и естественных наук
Кафедра прикладной информатики и теории вероятностей
```
Студент:Эйвази Мани
Группа:НПИбд- 03 - 24
Студенческий билет No: 1032245107

RAID на базе mdadm в Linux

### Презентация No 16


## RAID на базе mdadm в

## Linux

Программный RAID для отказоустойчивости и производительности


Концепция RAID: Аппаратный vs Программный

Аппаратный RAID
Реализован на отдельном контроллере, который разгружает центральный процессор. Обеспечивает высокую производительность и независимость от ОС, но требует
специализированного оборудования.

```
Программный RAID (mdadm)
Реализуется на уровне ядра операционной системы Linux с помощью модуля md (Multiple
Devices)экономичный и не зависит от конкретного и утилиты mdadm. Более гибкий,
оборудования.
```

#### mdadm: Центральный инструмент управления

```
Создание
Инициализация новых RAID-массивов различных
уровней с указанием устройств и параметров.
```
```
Сборка
Автоматическое или ручное подключение массивов
при загрузке системы.
```
```
Мониторинг
Наблюдение за состоянием массива, оповещение о
неисправностях и деградации.
```
```
Управление
Добавление/удаление дисков, управление горячим
резервом, замена отказавших устройств.
```

###### Базовые уровни RAID и их применение

RAID 0 (Striping)

Высокая производительность, но
нет отказоустойчивости.
Данные распределяются по всем
дискам.

```
RAID 1 (Mirroring)
Высокая отказоустойчивость за
счет полного дублирования
данных. Производительность
записи снижается.
```
```
RAID 5 / RAID 6
(Четность)
Баланс между
производительностью, емкостью
и отказоустойчивостью.
Используют данные четности для
восстановления.
```
```
RAID 10 (Striped
Mirrors)
Сочетает производительность
RAID 0 с отказоустойчивостью
RAID 1. Требует минимум 4 диска.
```

##### Создание RAID-массива с mdadm

Для создания RAID-массива необходимо
подготовить разделы дисков с типом Linux
raid autodetect (fd). Затем
используется команда mdadm --create с
указанием уровня RAID, количества активных
устройств и путей к ним.

```
sudo mdadm --create /dev/md0 --
level=1 --raid-devices=2 /dev/sdb
/dev/sdc
```
Это создаст массив RAID 1 из двух разделов.
Можно также добавить --spare-devices
для горячего резерва.


#### Файл конфигурации mdadm.conf

Файл /etc/mdadm/mdadm.conf (или /etc/mdadm.conf) содержит
информацию о RAID-массивах, что позволяет системе автоматически
собирать их при загрузке.

Его можно сгенерировать командой:

```
sudo mdadm --detail --scan >> /etc/mdadm/mdadm.conf
```
Это обеспечит корректную идентификацию и сборку массивов после
перезагрузки, предотвращая потерю доступа к данным.

Важность mdadm.conf

- Автоматическая сборка RAID
- Сохранение конфигурации
- Упрощение восстановления
- Идентификация массивов по UUID


#### Мониторинг и управление RAID-массивом

```
Состояние RAID-массива можно
отслеживать через /proc/mdstat и
mdadm --detail.
```
```
cat /proc/mdstat
```
```
sudo mdadm --detail /dev/md
```
```
Эти команды предоставляют
информацию о статусе дисков, ходе
синхронизации и наличии сбоев.
Управление горячим резервом (spare),
mark faulty, remove и add позволяют
оперативно реагировать на проблемы.
```

Отказоустойчивость и восстановление данных

```
Отказ диска
Массив в
деградированном
режиме
```
```
Восстановление
Запустите rebuild
(mdadm
автоматически)
```
```
Замена
Установите новый
диск немедленно
```
При сбое диска массив переходит в деградированный режим. Важно немедленно заменить вышедший из строя диск новым и запустить процесс
восстановления (rebuild). mdadm автоматически инициирует восстановление, используя данные четности или зеркалирования.


#### Расширение и миграция RAID-массивов

01

Добавление дисков

Возможность увеличить емкость
массива путем добавления новых
дисков, например, к RAID 5 или RAID 6.

```
02
```
```
Изменение уровня RAID
Миграция с одного уровня RAID на
другой (например, с RAID 1 на RAID 5) для
оптимизации отказоустойчивости
или производительности без потери
данных.
```
```
03
```
```
Изменение размера
компонентов
Перераспределение пространства на
существующих дисках для увеличения
доступной емкости массива.
```

#### Заключение: Выбор и

#### применение mdadm

mdadm предоставляет гибкое и экономичное решение для
программного RAID в Linux. Выбор уровня RAID зависит от требований к
производительности, отказоустойчивости и емкости.

Хотя LVM (Logical Volume Manager) обеспечивает гибкое управление
логическими томами, mdadm сосредоточен исключительно на
создании и управлении RAID-массивами. В сравнении с аппаратными
контроллерами, mdadm выигрывает в стоимости и гибкости, но
может уступать в производительности при интенсивных нагрузках.


# Спасибо за внимание


