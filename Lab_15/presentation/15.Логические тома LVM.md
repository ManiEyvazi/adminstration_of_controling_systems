РОССИЙСКИЙ УНИВЕРСИТЕТ ДРУЖБЫ НАРОДОВ

```
Факультет физико-математических и естественных наук
Кафедра прикладной информатики и теории вероятностей
```
Студент:Эйвази Мани

Группа:НПИбд- 03 - 24

Студенческий билет No: 1032245107

LVM: Управление Логическими Томами в

Linux

### Презентация No 15


## LVM: Управление

## Логическими Томами в

## Linux

Эффективное управление дисковым пространством для системных

администраторов и инженеров по безопасности


###### Проблемы Традиционных Разделов

```
Традиционные подходы к разбиению диска
часто сталкиваются с рядом ограничений,
значительно усложняющих управление
дисковым пространством:
```
- Ограниченная гибкость: Изменение
    размера раздела требует тщательного
    планирования и часто сопряжено с риском
    потери данных.
- Сложность изменения размера: Увеличение
    или уменьшение раздела "на лету" обычно
    невозможно без остановки системы или
    трудоемких операций.
- Невозможность объединения дисков:
    Несколько физических дисков не могут
    быть представлены как единый
    логический том.

```
Эти проблемы делают LVM жизненно важным
инструментом в современной серверной
инфраструктуре.
```

Трехуровневая Архитектура LVM

```
Группа томов
Пул пространства из PV
```
```
Логические тома
Виртуальные разделы из VG
```
```
Файловая система
Конечный слой для данных
```
LVM вводит абстрактный слой между физическими дисками и файловыми системами, обеспечивая беспрецедентную гибкость.

```
Физические тома (PV)
Физические диски или разделы
```
```
Группы томов (VG)
Объединение PV в единый пул
```
```
Логические тома (LV)
Разделы, созданные из VG
```

##### Физические Тома (Physical Volumes)

Инициализация дисков для LVM

Физические тома — это основа LVM,
представляющие собой сырые дисковые
устройства или разделы, подготовленные для
использования LVM. Они могут быть как целым
диском, так и отдельным разделом на диске.

- pvcreate: Инициализирует диск или раздел
    для LVM. Команда записывает метаданные
    LVM на устройство, делая его доступным
    для включения в группы томов.
- pvs: Выводит краткую информацию обо
    всех физических томах.
- pvdisplay: Предоставляет подробную
    информацию о физических томах, включая
    их размер, свободное пространство и
    принадлежность к группам томов.


###### Группы Томов (Volume Groups)

```
Объединение PV в единый пул
Группа томов — это абстрактное хранилище,
созданное путем объединения одного или
нескольких физических томов. VG является
пулом ресурсов, из которого выделяются
логические тома.
```
- vgcreate: Создает новую группу томов из
    указанных PV.
- vgextend: Добавляет новые PV в
    существующую VG для увеличения ее
    размера.
- vgreduce: Удаляет PV из VG. Все данные на
    удаляемом PV должны быть
    предварительно перемещены.
- vgs: Отображает краткий список групп
    томов.
- vgdisplay: Показывает подробную
    информацию о VG, включая размер,
    свободное пространство и PV, входящие в
    ее состав.


Логические Тома (Logical Volumes)

Создание и управление гибкими
разделами

Логические тома — это эквивалент
традиционных разделов, но с гораздо большей
гибкостью. Они создаются из доступного
пространства в группе томов и могут быть
использованы для создания файловых систем.

- lvcreate: Создает новый логический том в
    указанной VG. Можно задать размер и имя
    LV.
- lvs: Выводит краткую информацию обо
    всех логических томах.
- lvdisplay: Предоставляет подробную
    информацию о логических томах, включая
    их размер, принадлежность к VG и
    текущий статус.
- Форматирование и монтирование: После
    создания LV его необходимо
    отформатировать (например, с помощью
    mkfs.ext4 /dev/vg_name/lv_name) и
    смонтировать в файловую систему
    (например, mount
    /dev/vg_name/lv_name /mnt/data).


#### Гибкое Изменение Размеров

Расширение LV

```
lvextend: Увеличивает размер
логического тома. После
расширения LV необходимо также
расширить файловую систему.
(lvextend -L +10G
/dev/vg_name/lv_name)
```
```
lvresize: Универсальная команда
для изменения размера LV. Может
как увеличивать, так и
уменьшать LV. (lvresize -L
+10G /dev/vg_name/lv_name)
```
```
resize2fs, xfs_growfs: Инструменты
для расширения файловых систем
(ext4, xfs соответственно) после
изменения размера LV.
```
Уменьшение LV

```
Уменьшение LV — это более
сложная и рискованная операция,
требующая особой
осторожности. Перед
уменьшением LV необходимо
сначала уменьшить файловую
систему и размонтировать ее.
Внимание: Неправильное
уменьшение может привести к
потере данных. Всегда
создавайте резервные копии
перед этой операцией.
```

Снимки (Snapshots)

```
Запись
CoW область изменений
Создание
Оригинал снимка
```
```
Мгновенное резервное копирование
и восстановление
LVM-снимки (снапшоты) предоставляют
механизм для создания "моментальных" копий
логических томов. Они основаны на принципе
Copy-on-Write (CoW), что делает их очень
эффективными.
```
- Создание снапшотов: Снапшот создается
    быстро и занимает мало места, так как
    изначально он просто указывает на
    исходный LV. (lvcreate --size 1G --
    snapshot --name lv_snap
    /dev/vg_name/lv_name)
- Механизм CoW: При изменении данных в
    исходном LV или в снапшоте,
    оригинальные данные копируются в
    специальную область снапшота до
    внесения изменений. Это сохраняет
    "историческое" состояние.
- Восстановление данных: Снапшот можно
    использовать для восстановления
    исходного LV к моменту создания
    снапшота.
- Слияние (merge): Снапшот можно
    объединить с исходным LV, применяя
    изменения снапшота к основному тому
    или отбрасывая их.


## Дополнительные Возможности LVM

Перемещение Данных (pvmove)

Позволяет перемещать экстенты с одного физического

тома на другой внутри одной VG без остановки сервисов.

Тонкие Тома (Thin Provisioning)

Позволяет выделять логические тома, размер которых

превышает доступное физическое пространство.

Пространство выделяется по мере записи данных.

Кэширование (Caching)

Использование быстрых дисков (например, SSD) в качестве

кэша для медленных дисков (HDD) для повышения

производительности.

RAID через LVM

LVM может быть использован для создания программных

RAID-массивов (RAID 0, 1, 5, 6, 10), предоставляя

дополнительный уровень отказоустойчивости.


## Заключение:

## Преимущества LVM

- Гибкость и динамичность: Изменение размера разделов "на лету",

без перезагрузки системы.

- Абстракция: Изолирует файловые системы от физических дисков,

упрощая управление.

- Расширяемость: Легкое добавление новых дисков и расширение

хранилища.

- Резервное копирование: Мгновенные снапшоты для быстрого

восстановления данных.

- Оптимизация: Поддержка тонких томов и кэширования для

эффективного использования ресурсов.

LVM является неотъемлемым инструментом для построения

масштабируемой и отказоустойчивой серверной инфраструктуры.


# Спасибо за внимание


