![](media/image1.png){width="1.75in" height="0.6240912073490814in"}

**РОССИЙСКИЙ УНИВЕРСИТЕТ ДРУЖБЫ НАРОДОВ**

Факультет физико-математических и естественных наук\
Кафедра прикладной информатики и теории вероятностей

**ОТЧЕТ ПО ЛАБОРАТОРНОЙ РАБОТЕ № 15**

Управление логическими томами (LVM)

**Студент:** Эйвази Мани

**Группа:** НПИбд-03-24

**Студенческий билет №:** 1032245107

**Цель работы**

Получить практические навыки управления логическими томами с
использованием менеджера логических томов LVM (Logical Volume Manager).
Освоить полный цикл работы с LVM: создание физических томов, групп томов
и логических томов, форматирование и монтирование, изменение размеров
томов, а также расширение хранилища путем добавления новых физических
носителей.

**Первый шаг:** Удаление старых разделов и таблиц разделов на
дисках /dev/sdb и /dev/sdc, подготовка их к использованию в LVM.
partprobe /dev/sdb (аналогично для /dev/sdc).
Диски /dev/sdb и /dev/sdc не содержат разделов и готовы к разметке.

**Второй шаг:** На диске /dev/sdb создается первичный раздел размером
100 МБ с системным идентификатором 8e (Linux LVM).  Создан
раздел /dev/sdb1 типа Linux LVM.

![](media/image2.png){width="6.5in" height="4.490740376202974in"}

> **Третий шаг:** Создание LV lvgroup размером 200 МБ в группе vgdata,
> форматирование в XFS, настройка постоянного монтирования. Команда df
> -h показывает увеличение размера ФС XFS с 200 МБ до 350 МБ. Для XFS
> расширение выполняется \"на лету\", без размонтирования (в отличие от
> уменьшения, которое XFS не поддерживает).
>
> ![](media/image2.png){width="6.5in" height="2.4034722222222222in"}

**Остальные скриншоты внутри файл Doc1**

**заключение**

В ходе лабораторной работы были успешно освоены принципы и инструменты
управления логическими томами LVM --- технологии, являющейся стандартом
де-факто для гибкого управления хранилищем в корпоративных
Linux-системах.

1.  **Трехуровневая архитектура LVM:**

    - **Физические тома (PV):** Нижний уровень абстракции. Могут быть
      дисками целиком (/dev/sdc) или отдельными разделами (/dev/sdb1).
      Инициализируются командой pvcreate.

    - **Группы томов (VG):** Объединение PV в единый пул ресурсов.
      Физическое пространство от разных дисков агрегируется. Управление
      через vgcreate, vgextend, vgreduce.

    - **Логические тома (LV):** \"Виртуальные разделы\", создаваемые из
      пространства VG. Именно на них создаются файловые системы.
      Управление через lvcreate, lvextend, lvreduce, lvremove.

2.  **Ключевые преимущества, отработанные на практике:**

    - **Гибкость изменения размера:** Возможность увеличивать LV (и ФС
      на нем) без размонтирования и без прерывания работы сервиса. Это
      критически важно для production-систем.

    - **Динамическое расширение хранилища:** Добавление нового
      физического диска (PV) в существующую VG и выделение пространства
      из него на уже работающий LV --- отработано на практике.

    - **Абстракция от оборудования:** Система работает с именами LV
      (/dev/vgdata/lvdata), а не с именами устройств (/dev/sdb1). Это
      позволяет перемещать данные между физическими носителями (pvmove)
      без изменения конфигурации (/etc/fstab).

3.  **Важные нюансы:**

    - Расширение LV с опцией -r (\--resizefs) --- лучшая практика, т.к.
      автоматически расширяет ФС.

    - Уменьшение LV --- опасная операция, требует размонтирования ФС и
      поддержки уменьшения со стороны ФС (ext4 поддерживает, XFS
      --- **нет**).

    - LVM требует наличия свободного места в VG для расширения LV.
      Исчерпание места решается добавлением нового PV.

Работа сформировала понимание LVM как мощного инструмента, превращающего
набор жестких дисков в единый гибкий пул хранения, которым можно
управлять динамически. Это фундаментальный навык для администрирования
современных серверов, виртуализации и облачных сред.

1.  Какойтип раздела используется в разделе GUID для работы с LVM?

> В GPT: 8e00 (в gdisk), в parted: lvm. В MBR: код 8e.

2.  Какой командой можно создать группу томов с именем vggroup, которая
    содержит физическое устройство /dev/sdb3 и использует физический
    экстент 4 MiB?

> vgcreate -s 4M vggroup /dev/sdb3

3.  Какая команда показывает краткую сводку физических томов в вашей
    системе, а также группу томов, к которой они принадлежат?

> pvs (Physical Volume Summary).

4.  Что вам нужно сделать, чтобы добавить весь жесткий диск /dev/sdd в
    группу томов vggroup?bash

> pvcreate /dev/sdd\
> vgextend vggroup /dev/sdd

5.  Какая команда позволяет вам создать логический том lvvol1 с размером
    6 MiB?

> lvcreate -n lvvol1 -L 6M vggroup

6.  Какая команда позволяет вам добавить 100 МБ в логический том lvvol1,
    если предположить, что дисковое пространство доступно в группе
    томов?

> lvextend -L +100M /dev/vggroup/lvvol1

7.  Какой первый шаг, чтобы добавить еще 200 МБ дискового пространства в
    логический том, если требуемое дисковое пространство недоступно в
    группе томов?

> Добавить новый физический том в группу томов:
>
> bash
>
> pvcreate /dev/\<новый_диск_или_раздел\>
>
> vgextend vggroup /dev/\<новый_диск_или_раздел\>

8.  Какую опцию нужно использовать с командой lvextend, чтобы также
    изменить размер файловой системы?

> -r или --resizefs

9.  Как посмотреть, какие логические тома доступны?

> lvs (краткий вывод) или lvdisplay (подробный вывод).

10. Какую команду нужно использовать для проверки целостности файловой
    системы на /dev/vgdata/lvdata?

> Для EXT4: e2fsck -f /dev/vgdata/lvdata. Для XFS: xfs_repair
> /dev/vgdata/lvdata (требует размонтирования).
