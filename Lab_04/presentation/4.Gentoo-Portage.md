```
РОССИЙСКИЙ УНИВЕРСИТЕТ ДРУЖБЫ НАРОДОВ
Факультет физико-математических и естественных наук
Кафедра прикладной информатики и теории вероятностей
```
Студент:Эйвази Мани
Группа:НПИбд- 03 - 24
Студенческий билет No: 1032245107

Gentoo Portage

### Презентация No 4


## Gentoo Portage

Модель управления программным обеспечением на основе исходных
кодов


```
ВВЕДЕНИЕ
```
##### Portage: Философия и отличия

Portage — это не просто менеджер пакетов,
это сердце Gentoo Linux, воплощающее
идеологию максимальной настройки и
контроля. В отличие от бинарных пакетных
менеджеров, таких как APT или Yum, Portage
фокусируется на сборке программного
обеспечения непосредственно из исходных
кодов.

Это позволяет оптимизировать каждый пакет
под конкретное оборудование и
пользовательские нужды, но требует больше
времени и вычислительных ресурсов.


```
АРХИТЕКТУРА
```
Архитектура Portage: Основы

```
ebuild скрипты
```
```
утилита emerge
```
```
дерево Portage
```
Архитектура Portage включает в себя три ключевых компонента, работающих в тесном взаимодействии для обеспечения гибкого управления
пакетами.


```
EBUILD
```
Ядро системы: ebuild-скрипты

Ebuild — это текстовый файл-скрипт, который содержит все
инструкции, необходимые для сборки, установки и удаления
программного пакета. Он описывает:

- Местоположение исходных кодов
- Зависимости пакета
- Этапы сборки (fetch, unpack, compile, install)
- Параметры конфигурации

EAPI (Ebuild Application Programming Interface) — это версия ebuild-
формата, определяющая доступные функции и синтаксис.

```
# Пример ebuild-файла
EAPI=
DESCRIPTION="Simple hello world program"
HOMEPAGE="https://example.com"
SRC_URI="https://example.com/hello-1.0.tar.gz"
KEYWORDS="~amd64"
LICENSE="GPL-2"
RESTRICT="mirror"
RDEPEND="
dev-libs/glib
"
S="${WORKDIR}/hello-1.0"
src_compile() {
emake
}
src_install() {
dobin hello
}
```

```
ИНСТРУМЕНТ
```
###### emerge: Ваш командный центр

```
Утилита emerge — это основной интерфейс
для взаимодействия с системой Portage. Она
интерпретирует ebuild-скрипты и выполняет
необходимые действия:
```
- Установка:emerge --ask sys-
    apps/portage
- Обновление:emerge --sync && emerge
    --update --deep --newuse --ask
    world
- Поиск:emerge --search firefox
- Удаление:emerge --depclean &&
    emerge --ask --unmerge firefox
emerge автоматизирует процесс разрешения
зависимостей, загрузки исходных кодов,
компиляции и установки.


```
НАСТРОЙКА
```
#### USE-флаги: Механизм тонкой настройки

```
Что это?
Глобальные или пакетные
флаги, включающие или
отключающие определённую
функциональность при сборке
пакета. Например, USE-флаг
"gnome" для сборки
программы с поддержкой
GNOME.
```
```
Как это работает?
При активации USE-флага в
файлах конфигурации Portage,
соответствующие секции в
ebuild-скриптах
активируются, изменяя
параметры компиляции.
```
```
Преимущества
Максимальная гибкость и
оптимизация. Позволяет
создавать минималистичные
системы, отключая ненужные
функции и зависимости.
```

```
УПРАВЛЕНИЕ
```
Профили и маскировка пакетов

```
Профили
Определяют базовый набор USE-флагов,
зависимостей и системных настроек.
Существуют профили для различных случаев
использования (desktop, server, hardened).
Маскировка пакетов
```
- keyword masked: Пакеты, не
    протестированные для вашей
    архитектуры.
- stable: Пакеты, не предназначенные для
    стабильных систем.
- hard masked: Пакеты, полностью
    запрещенные к установке (например,
    устаревшие версии).
Эти механизмы обеспечивают стабильность
системы и позволяют контролировать
доступные версии программного обеспечения.


```
КОНФИГУРАЦИЯ
```
#### Конфигурационные файлы Portage

```
/etc/portage/make.conf
Основной файл конфигурации,
содержащий глобальные настройки,
такие как CFLAGS, CXXFLAGS, CHOST
и глобальные USE-флаги.
```
```
/etc/portage/package.use
Определяет специфичные для
пакетов USE-флаги, переопределяя
глобальные настройки. Позволяет
тонко настраивать отдельные
программы.
```
```
/etc/portage/package.acce
pt_keywords
Позволяет размаскировать пакеты,
помеченные как "keyword masked",
для установки менее стабильных,
но более свежих версий.
```

```
ИНСТРУМЕНТЫ
```
#### Дополнительные возможности Portage

Бинарные пакеты

quickpkg и buildpkg позволяют
создавать бинарные пакеты из уже
установленных программ. Это
ускоряет установку на других
компьютерах с аналогичной
конфигурацией.

```
gentoolkit
Набор полезных утилит, таких как
equery для запросов о пакетах, revdep-
rebuild для восстановления сломанных
зависимостей, и eix для расширенного
поиска.
```
```
Расширенные настройки
Возможность использования оверлеев
для добавления сторонних ebuild-
репозиториев и глубокая интеграция с
системой инициализации OpenRC.
```

```
ЗАКЛЮЧЕНИЕ
```
##### Преимущества модели Portage

Гибкость и оптимизация

- Тонкая настройка каждого пакета под
    аппаратное обеспечение.
- Возможность создания минималистичных
    систем без лишних зависимостей.

Контроль

- Полный контроль над версиями пакетов и
    функциональностью.
- Прозрачность процесса сборки и установки.

Области применения

Идеально подходит для системных
администраторов, разработчиков и
энтузиастов, которым нужен полный контроль
над своим окружением.


# Спасибо за внимание


